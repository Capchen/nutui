{"version":3,"file":"components/popup/index.js","sources":["webpack:///./src/components/popup/index.vue?61ab","webpack:///._src_components_popup_index.vue","webpack:///./src/components/popup/index.vue?229c","webpack:///./src/components/popup/index.vue?af5a","webpack:///./src/components/popup/index.vue?d9c5","webpack:///./src/components/popup/index.vue?538f","webpack:///./src/components/popup/index.vue?ee9e","webpack:///._src_components_popup_use-lock-scroll.ts"],"sourcesContent":["import { render } from \"./index.vue?vue&type=template&id=17c1444f&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=17c1444f&lang=scss\"\n\nimport exportComponent from \"/Users/yangxiaolu3/Documents/JD/NutUI/online/weapp/nutui/src/sites/weapp-project/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__file',\"src/components/popup/index.vue\"]])\n/* hot reload */\nif (module.hot) {\n  __exports__.__hmrId = \"17c1444f\"\n  const api = __VUE_HMR_RUNTIME__\n  module.hot.accept()\n  if (!api.createRecord('17c1444f', __exports__)) {\n    console.log('reload')\n    api.reload('17c1444f', __exports__)\n  }\n  \n  module.hot.accept(\"./index.vue?vue&type=template&id=17c1444f&ts=true\", () => {\n    console.log('re-render')\n    api.rerender('17c1444f', render)\n  })\n\n}\n\n\nexport default __exports__","<template>\n    <view >\n      <!-- <nut-overlay\n        :visible=\"visible\"\n        :close-on-click-overlay=\"closeOnClickOverlay\"\n        :class=\"overlayClass\"\n        :style=\"overlayStyle\"\n        :z-index=\"zIndex\"\n        :lock-scroll=\"lockScroll\"\n        :duration=\"duration\"\n        @click=\"onClickOverlay\"\n      /> -->\n      <!-- <nut-icon v-bind=\"$attrs\" :name=\"closeIcon\" size=\"12px\" /> -->\n      <Transition :name=\"transitionName\" @after-enter=\"onOpened\" @after-leave=\"onClosed\">\n        <view v-show=\"visible\" :class=\"classes\" :style=\"popStyle\" @click=\"onClick\">\n          <div class=\"nutui-popup__content-wrapper\" v-show=\"showSlot\"><native-slot /></div>\n          <view\n            v-if=\"closed\"\n            @click=\"onClickCloseIcon\"\n            class=\"nutui-popup__close-icon\"\n            :class=\"'nutui-popup__close-icon--' + closeIconPosition\"\n          >\n            \n          </view>\n        </view>\n      </Transition>\n    </view>\n  </template>\n  <script lang=\"ts\">\n  import {\n    onMounted,\n    onBeforeMount,\n    onBeforeUnmount,\n    onActivated,\n    onDeactivated,\n    watch,\n    computed,\n    reactive,\n    PropType,\n    CSSProperties,\n    toRefs,\n    getCurrentInstance\n  } from 'vue';\n  import { useLockScroll } from './use-lock-scroll';\n  import { overlayProps } from '../overlay/index.vue';\n\n  import { createComponent } from '@/packages/utils/create';\n  const { componentName, create } = createComponent('popup');\n  let _zIndex = 2000;\n  export const popupProps = {\n    ...overlayProps,\n    position: {\n      type: String,\n      default: 'center'\n    },\n    transition: String,\n    style: {\n      type: Object as PropType<CSSProperties>\n    },\n    popClass: {\n      type: String,\n      default: ''\n    },\n    closeable: {\n      type: Boolean,\n      default: false\n    },\n    closeIconPosition: {\n      type: String,\n      default: 'top-right'\n    },\n    closeIcon: {\n      type: String,\n      default: 'close'\n    },\n    destroyOnClose: {\n      type: Boolean,\n      default: true\n    },\n    teleport: {\n      type: [String, Element],\n      default: 'body'\n    },\n    overlay: {\n      type: Boolean,\n      default: true\n    },\n    round: {\n      type: Boolean,\n      default: false\n    },\n    safeAreaInsetBottom: {\n      type: Boolean,\n      default: false\n    }\n  };\n  export default create({\n    props: {\n      ...popupProps\n    },\n    emits: ['click', 'click-close-icon', 'open', 'close', 'opend', 'closed', 'update:visible', 'click-overlay'],\n    setup(props, { emit }) {\n      const state = reactive({\n        zIndex: props.zIndex ? (props.zIndex as number) : _zIndex,\n        showSlot: true,\n        transitionName: `popup-fade-${props.position}`,\n        overLayCount: 1,\n        keepAlive: false,\n        closed: props.closeable\n      });\n      const [lockScroll, unlockScroll] = useLockScroll(() => props.lockScroll);\n      const classes = computed(() => {\n        const prefixCls = componentName;\n        return {\n          [prefixCls]: true,\n          ['round']: props.round,\n          [`popup-${props.position}`]: true,\n          [`popup-${props.position}--safebottom`]: props.position === 'bottom' && props.safeAreaInsetBottom,\n          [props.popClass]: true\n        };\n      });\n      const popStyle = computed(() => {\n        return {\n          zIndex: state.zIndex,\n          animationDuration: props.duration ? `${props.duration}s` : 'initial',\n          ...props.style\n        };\n      });\n      const open = () => {\n        if (props.zIndex != 2000) {\n          _zIndex = Number(props.zIndex);\n        }\n        emit('update:visible', true);\n        lockScroll();\n        state.zIndex = ++_zIndex;\n        if (props.destroyOnClose) {\n          state.showSlot = true;\n        }\n        emit('open');\n      };\n      const close = () => {\n        if (props.visible) {\n          unlockScroll();\n          emit('update:visible', false);\n          if (props.destroyOnClose) {\n            setTimeout(() => {\n              state.showSlot = false;\n              emit('close');\n            }, +props.duration * 1000);\n          }\n        }\n      };\n      const onClick = (e: Event) => {\n        emit('click', e);\n      };\n      const onClickCloseIcon = (e: Event) => {\n        emit('click-close-icon', e);\n        close();\n      };\n      const onClickOverlay = (e: Event) => {\n        if (props.closeOnClickOverlay) {\n          emit('click-overlay', e);\n          close();\n        }\n      };\n      const onOpened = (e: Event) => {\n        emit('opend', e);\n      };\n      const onClosed = (e: Event) => {\n        emit('closed', e);\n      };\n      onMounted(() => {\n        props.transition\n          ? (state.transitionName = props.transition)\n          : (state.transitionName = `popup-slide-${props.position}`);\n        props.visible && open();\n      });\n      onBeforeUnmount(() => {\n        props.visible && close();\n      });\n      onBeforeMount(() => {\n        if (props.visible) {\n          unlockScroll();\n        }\n      });\n      onActivated(() => {\n        if (state.keepAlive) {\n          emit('update:visible', true);\n          state.keepAlive = false;\n        }\n      });\n      onDeactivated(() => {\n        if (props.visible) {\n          close();\n          state.keepAlive = true;\n        }\n      });\n      watch(\n        () => props.visible,\n        (value) => {\n          if (value) {\n            open();\n          } else {\n            close();\n          }\n        }\n      );\n      watch(\n        () => props.position,\n        (value) => {\n          value === 'center' ? (state.transitionName = 'popup-fade') : (state.transitionName = `popup-slide-${value}`);\n        }\n      );\n      watch(\n        () => props.closeable,\n        (value) => {\n          state.closed = value;\n        }\n      );\n      return {\n        ...toRefs(state),\n        popStyle,\n        classes,\n        onClick,\n        onClickCloseIcon,\n        onClickOverlay,\n        onOpened,\n        onClosed\n      };\n    }\n  });\n  </script>\n    <style lang=\"scss\">\n    @import './index.scss';\n    </style>\n  ","// extracted by mini-css-extract-plugin","import '@tarojs/plugin-platform-weapp/dist/runtime'\nimport '@tarojs/plugin-html/dist/runtime'\n\nimport { createNativeComponentConfig } from '@tarojs/plugin-framework-vue3/dist/runtime'\n\nimport { h, createApp } from 'vue'\n\nvar component = require(\"../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\").default\nvar config = {\"navigationBarTitleText\":\"Popup\",\"multipleSlots\":true,\"usingComponents\":{\"nut-icon\":\"../nutIcon/index\",\"nut-overlay\":\"../overlay/index\"}};\nvar inst = Component(createNativeComponentConfig(component, h, config))\n\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=script&lang=ts\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=script&lang=ts\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js??ref--1-oneOf-0-1!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/@tarojs/mini-runner/node_modules/postcss-loader/dist/cjs.js??ref--1-oneOf-0-2!../../../node_modules/@tarojs/mini-runner/node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js??ref--1-oneOf-0-4!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=style&index=0&id=17c1444f&lang=scss\"","export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/templateLoader.js??ref--6!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=template&id=17c1444f&ts=true\"","let count = 0;\n\nconst CLSNAME = 'nut-overflow-hidden';\n\nexport const useLockScroll = (isLock: () => boolean) => {\n  const lock = () => {\n    if (isLock()) {\n      !count && document.body.classList.add(CLSNAME);\n      count++;\n    }\n  };\n\n  const unlock = () => {\n    if (isLock() && count) {\n      count--;\n      !count && document.body.classList.remove(CLSNAME);\n    }\n  };\n\n  return [lock, unlock];\n};\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAcA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACGA;AAcA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAOA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAEA;AACA;AAEA;AACA;AAAA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;;;;;;;;;;;;;;;;;;;AAvNA;AAAA;AAAA;AAAA;;AAdA;AAYA;AAAA;AAAA;AAAA;;AACA;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AACA;;AAGA;;;AAAA;AAAA;AACA;AALA;;;;;;;;;;;;;;;ACdA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;A","sourceRoot":""}